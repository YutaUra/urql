Object.defineProperty(exports,"__esModule",{value:!0});var e=require("wonka"),r=require("graphql"),t=require("@urql/core"),n="undefined"!=typeof Symbol?Symbol.asyncIterator:null;exports.executeExchange=({schema:a,rootValue:i,context:l,fieldResolver:o,typeResolver:u,subscribeFieldResolver:s})=>({forward:c})=>v=>{var d=e.share(v),f=e.mergeMap((c=>{var{key:v}=c,f=e.filter((e=>"teardown"===e.kind&&e.key===v))(d),m="function"==typeof l?l(c):l,b=Object.create(null);if(c.variables)for(var p in c.variables)void 0!==c.variables[p]&&(b[p]=c.variables[p]);return e.takeUntil(f)(((a,i)=>e.make((e=>{var l,o=!1;return Promise.resolve().then((async()=>({...i,contextValue:await i.contextValue}))).then((e=>{if(!o)return"subscription"===a.kind?r.subscribe(e):r.execute(e)})).then((r=>{if(!o&&r){if(n&&r[n]){l=r[n]();var i=null;return l.next().then((function r({done:n,value:u}){if(u&&e.next(i=i?t.mergeResultPatch(i,u):t.makeResult(a,u)),!n&&!o)return l.next().then(r)}))}e.next(t.makeResult(a,r))}})).then((()=>{e.complete()})).catch((r=>{e.next(t.makeErrorResult(a,r)),e.complete()})),()=>{l&&l.return&&l.return(),o=!0}})))(c,{schema:a,document:c.query,rootValue:i,contextValue:m,variableValues:b,operationName:t.getOperationName(c.query),fieldResolver:o,typeResolver:u,subscribeFieldResolver:s}))}))(e.filter((e=>"query"===e.kind||"mutation"===e.kind||"subscription"===e.kind))(d)),m=c(e.filter((e=>"teardown"===e.kind))(d));return e.merge([f,m])};
//# sourceMappingURL=urql-exchange-execute.min.js.map
